<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel</title>
  <style>
    body { font-family: sans-serif; background: #f0f0f0; margin: 0; padding: 20px; }
    .tasklist, .log { background: #fff; padding: 20px; margin: 20px 0; border-radius:8px; box-shadow: 0 0 8px #ccc; }
    .taskform { margin: 16px 0; }
    input, textarea, button { margin: 2px; font-size: 1em; }
    textarea { width: 90%; }
  </style>
</head>
<body>
  <h1>GitHub Actions Admin Panel</h1>
  <div class="taskform">
    <h2>Добавить задачу</h2>
    <form id="addtask">
      <input name="target_file" placeholder="Имя файла, напр. worker1.log" required>
      <textarea name="content" placeholder="Содержимое..." required></textarea><br>
      <button type="submit">Создать задачу</button>
    </form>
  </div>
  <div class="tasklist">
    <h2>Задачи (tasks.json)</h2>
    <pre id="tasks"></pre>
    <button onclick="fetchTasks()">Обновить список задач</button>
  </div>
  <div class="log">
    <h2>Последние действия (logs)</h2>
    <pre id="logs"></pre>
    <button onclick="fetchLogs()">Обновить логи</button>
  </div>
  <script>
    async function fetchTasks() {
      const res = await fetch('https://raw.githubusercontent.com/artemis1987/Privet-mir/main/tasks.json');
      document.getElementById('tasks').textContent = await res.text();
    }
    async function fetchLogs() {
      const res = await fetch('https://raw.githubusercontent.com/artemis1987/Privet-mir/main/worker.log');
      document.getElementById('logs').textContent = await res.text();
    }
    document.getElementById('addtask').onsubmit = async (e) => {
      e.preventDefault();
      alert('Чтобы добавить задачу, измени файл tasks.json через GitHub — или напиши если хочешь реализовать добавление задач прямо из панели через GitHub API.');
    };
    window.onload = () => { fetchTasks(); fetchLogs(); }
  </script>
</body>
</html> 
