<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ö° GitHub PRO Admin</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0c10;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            color: #e6edf3;
            line-height: 1.6;
        }

        /* –ù–∞–≤–±–∞—Ä */
        .navbar {
            background: #161b22;
            border-bottom: 1px solid #30363d;
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo h1 {
            font-size: 24px;
            background: linear-gradient(135deg, #2ea043, #58a6ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .badge {
            background: #1f6feb;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
        }

        .secure-badge {
            background: #238636;
            color: white;
            padding: 6px 16px;
            border-radius: 30px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        .container {
            max-width: 1400px;
            margin: 24px auto;
            padding: 0 24px;
        }

        /* –°–µ—Ç–∫–∞ */
        .grid {
            display: grid;
            grid-template-columns: 320px 1fr 350px;
            gap: 20px;
        }

        /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ */
        .card {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.2s;
        }

        .card:hover {
            border-color: #3d444d;
            box-shadow: 0 8px 24px rgba(1, 4, 9, 0.4);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid #30363d;
        }

        .card-header h2 {
            font-size: 16px;
            font-weight: 600;
            color: #e6edf3;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            padding: 8px 16px;
            border-radius: 6px;
            border: none;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: #238636;
            color: white;
        }

        .btn-primary:hover {
            background: #2ea043;
        }

        .btn-secondary {
            background: #21262d;
            color: #e6edf3;
            border: 1px solid #3d444d;
        }

        .btn-secondary:hover {
            background: #30363d;
        }

        .btn-danger {
            background: #da3633;
            color: white;
        }

        .btn-danger:hover {
            background: #f85149;
        }

        /* –§–æ—Ä–º—ã */
        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            color: #8b949e;
            font-size: 13px;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 8px 12px;
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 6px;
            color: #e6edf3;
            font-size: 14px;
            transition: all 0.2s;
        }

        .form-control:focus {
            outline: none;
            border-color: #2ea043;
            box-shadow: 0 0 0 3px rgba(46, 160, 67, 0.1);
        }

        textarea.form-control {
            min-height: 120px;
            font-family: 'Monaco', 'Menlo', monospace;
            resize: vertical;
        }

        /* –§–∞–π–ª–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä */
        .file-tree {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #30363d;
            border-radius: 8px;
            background: #0d1117;
        }

        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 12px;
            border-bottom: 1px solid #30363d;
            cursor: pointer;
            transition: background 0.2s;
        }

        .file-item:last-child {
            border-bottom: none;
        }

        .file-item:hover {
            background: #21262d;
        }

        .file-item.selected {
            background: #1f6feb33;
            border-left: 3px solid #2ea043;
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }

        .file-actions {
            display: flex;
            gap: 4px;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .file-item:hover .file-actions {
            opacity: 1;
        }

        .icon-btn {
            background: none;
            border: none;
            color: #8b949e;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
        }

        .icon-btn:hover {
            background: #30363d;
            color: #e6edf3;
        }

        /* –¢–∞–±—ã */
        .tabs {
            display: flex;
            gap: 4px;
            border-bottom: 1px solid #30363d;
            margin-bottom: 16px;
        }

        .tab {
            padding: 8px 16px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            color: #8b949e;
            font-size: 14px;
        }

        .tab.active {
            color: #2ea043;
            border-bottom-color: #2ea043;
        }

        /* –°—Ç–∞—Ç—É—Å—ã */
        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-success {
            background: #23863633;
            color: #2ea043;
            border: 1px solid #2ea043;
        }

        .status-pending {
            background: #9e6a0333;
            color: #d29922;
            border: 1px solid #d29922;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .loading {
            animation: pulse 1.5s ease-in-out infinite;
        }

        /* –ê–ª–µ—Ä—Ç—ã */
        .alert {
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .alert-success {
            background: #23863633;
            border: 1px solid #2ea043;
            color: #2ea043;
        }

        .alert-error {
            background: #da363333;
            border: 1px solid #f85149;
            color: #f85149;
        }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä */
        .progress {
            height: 4px;
            background: #30363d;
            border-radius: 2px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-bar {
            height: 100%;
            background: #2ea043;
            transition: width 0.3s;
        }

        /* –†–µ—Å–ø–æ–Ω—Å–∏–≤ */
        @media (max-width: 1200px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="navbar">
        <div class="logo">
            <span style="font-size: 28px;">‚ö°</span>
            <h1>GitHub PRO Admin</h1>
            <span class="badge">v3.0</span>
        </div>
        <div class="secure-badge">
            <span>üîí</span>
            <span>–¢–æ–∫–µ–Ω—ã –≤ GitHub Secrets</span>
        </div>
    </div>

    <div class="container">
        <!-- –°—Ç–∞—Ç—É—Å –±–∞—Ä -->
        <div style="margin-bottom: 20px;">
            <div class="alert alert-success" id="statusAlert" style="display: none;">
                <span>‚úÖ</span>
                <span id="statusMessage"></span>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç–∫–∞ -->
        <div class="grid">
            <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ -->
            <div class="card">
                <div class="card-header">
                    <h2>üì¶ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏</h2>
                    <button class="btn btn-primary btn-small" onclick="showCreateRepo()">‚ûï –ù–æ–≤—ã–π</button>
                </div>
                
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="–ü–æ–∏—Å–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤..." id="repoSearch">
                </div>

                <div class="file-tree" id="repoList">
                    <div class="file-item">
                        <span class="file-info">üìÅ Privet-mir (—Ç–µ–∫—É—â–∏–π)</span>
                    </div>
                </div>

                <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è -->
                <div id="createRepoForm" style="display: none; margin-top: 20px;">
                    <h3 style="color: #8b949e; margin-bottom: 10px;">–°–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π</h3>
                    <div class="form-group">
                        <input type="text" class="form-control" id="repoName" placeholder="–ò–º—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è">
                    </div>
                    <div class="form-group">
                        <textarea class="form-control" id="repoDesc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" rows="2"></textarea>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-primary" onclick="createRepo()">–°–æ–∑–¥–∞—Ç—å</button>
                        <button class="btn btn-secondary" onclick="hideCreateRepo()">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </div>
            </div>

            <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∫–æ–ª–æ–Ω–∫–∞: –§–∞–π–ª—ã –∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä -->
            <div class="card">
                <div class="card-header">
                    <h2>üìÅ –§–∞–π–ª—ã Privet-mir</h2>
                    <div>
                        <button class="btn btn-secondary btn-small" onclick="loadFiles()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                        <button class="btn btn-primary btn-small" onclick="showNewFile()">‚ûï –ù–æ–≤—ã–π —Ñ–∞–π–ª</button>
                    </div>
                </div>

                <!-- –¢–∞–±—ã -->
                <div class="tabs">
                    <div class="tab active" onclick="switchTab('files')" id="tabFiles">–§–∞–π–ª—ã</div>
                    <div class="tab" onclick="switchTab('editor')" id="tabEditor">–†–µ–¥–∞–∫—Ç–æ—Ä</div>
                    <div class="tab" onclick="switchTab('terminal')" id="tabTerminal">–¢–µ—Ä–º–∏–Ω–∞–ª</div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ —Å —Ñ–∞–π–ª–∞–º–∏ -->
                <div id="filesTab">
                    <div class="file-tree" id="fileList">
                        <div class="file-item">
                            <span class="file-info">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...</span>
                        </div>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ —Å —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º -->
                <div id="editorTab" style="display: none;">
                    <div class="form-group">
                        <input type="text" class="form-control" id="editFileName" placeholder="–ò–º—è —Ñ–∞–π–ª–∞">
                    </div>
                    <div class="form-group">
                        <textarea class="form-control" id="editFileContent" placeholder="–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞..." rows="15"></textarea>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-primary" onclick="saveFile()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        <button class="btn btn-secondary" onclick="previewFile()">üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</button>
                        <button class="btn btn-danger" onclick="deleteFile()">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ —Å —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–º -->
                <div id="terminalTab" style="display: none;">
                    <div style="background: #0d1117; padding: 15px; border-radius: 8px; font-family: monospace; height: 300px; overflow-y: auto;" id="terminal">
                        <div style="color: #2ea043;">$ git status</div>
                        <div>–ù–∞ –≤–µ—Ç–∫–µ main</div>
                        <div style="color: #8b949e;">_________________________________</div>
                    </div>
                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                        <input type="text" class="form-control" placeholder="git commit -m ..." id="gitCommand">
                        <button class="btn btn-primary" onclick="runGitCommand()">–í—ã–ø–æ–ª–Ω–∏—Ç—å</button>
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: Actions –∏ –¥–µ–ø–ª–æ–π -->
            <div class="card">
                <div class="card-header">
                    <h2>‚ö° GitHub Actions</h2>
                    <span class="status-badge status-success" id="actionsStatus">–ê–∫—Ç–∏–≤–Ω–æ</span>
                </div>

                <!-- Workflows -->
                <div style="margin-bottom: 20px;">
                    <h3 style="color: #8b949e; font-size: 14px; margin-bottom: 10px;">Workflows</h3>
                    <div class="file-tree">
                        <div class="file-item" onclick="runWorkflow('ai-proxy.yml')">
                            <span class="file-info">ü§ñ AI Proxy</span>
                            <span class="status-badge status-success">‚úÖ</span>
                        </div>
                        <div class="file-item" onclick="runWorkflow('pages-build-deployment')">
                            <span class="file-info">üìÑ Pages</span>
                            <span class="status-badge status-pending">‚è≥</span>
                        </div>
                    </div>
                </div>

                <!-- –î–µ–ø–ª–æ–π -->
                <div style="margin-bottom: 20px;">
                    <h3 style="color: #8b949e; font-size: 14px; margin-bottom: 10px;">–î–µ–ø–ª–æ–π</h3>
                    <button class="btn btn-primary" style="width: 100%; margin-bottom: 10px;" onclick="deployPages()">
                        üöÄ –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ GitHub Pages
                    </button>
                    <div class="progress" id="deployProgress" style="display: none;">
                        <div class="progress-bar" style="width: 0%;"></div>
                    </div>
                </div>

                <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø—É—Å–∫–∏ -->
                <div>
                    <h3 style="color: #8b949e; font-size: 14px; margin-bottom: 10px;">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø—É—Å–∫–∏</h3>
                    <div class="file-tree" id="recentRuns">
                        <div class="file-item">
                            <span class="file-info">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                        </div>
                    </div>
                </div>

                <!-- –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã -->
                <div style="margin-top: 20px;">
                    <h3 style="color: #8b949e; font-size: 14px; margin-bottom: 10px;">–ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã</h3>
                    <button class="btn btn-secondary" style="width: 100%; margin-bottom: 5px;" onclick="createIndexHtml()">
                        üìÑ –°–æ–∑–¥–∞—Ç—å index.html
                    </button>
                    <button class="btn btn-secondary" style="width: 100%; margin-bottom: 5px;" onclick="createWorkflow()">
                        ‚öôÔ∏è –°–æ–∑–¥–∞—Ç—å workflow
                    </button>
                    <button class="btn btn-secondary" style="width: 100%;" onclick="enablePages()">
                        üåê –í–∫–ª—é—á–∏—Ç—å GitHub Pages
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const REPO = 'artemis1987/Privet-mir';
        let currentFile = null;
        let currentTab = 'files';

        // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showMessage(text, type = 'success') {
            const alert = document.getElementById('statusAlert');
            const message = document.getElementById('statusMessage');
            message.textContent = text;
            alert.className = `alert alert-${type}`;
            alert.style.display = 'flex';
            setTimeout(() => { alert.style.display = 'none'; }, 5000);
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–±–æ–≤
        function switchTab(tab) {
            currentTab = tab;
            document.getElementById('filesTab').style.display = tab === 'files' ? 'block' : 'none';
            document.getElementById('editorTab').style.display = tab === 'editor' ? 'block' : 'none';
            document.getElementById('terminalTab').style.display = tab === 'terminal' ? 'block' : 'none';
            
            document.getElementById('tabFiles').className = tab === 'files' ? 'tab active' : 'tab';
            document.getElementById('tabEditor').className = tab === 'editor' ? 'tab active' : 'tab';
            document.getElementById('tabTerminal').className = tab === 'terminal' ? 'tab active' : 'tab';
        }

        // –ó–ê–ì–†–£–ó–ö–ê –§–ê–ô–õ–û–í (–±–µ–∑ —Ç–æ–∫–µ–Ω–∞ - –ø—É–±–ª–∏—á–Ω–æ)
        async function loadFiles() {
            document.getElementById('fileList').innerHTML = '<div class="file-item"><span class="file-info">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...</span></div>';
            
            try {
                const res = await fetch(`https://api.github.com/repos/${REPO}/git/trees/main?recursive=1`);
                const data = await res.json();
                
                if (data.tree) {
                    let html = '';
                    data.tree
                        .filter(item => item.type === 'blob')
                        .sort((a, b) => a.path.localeCompare(b.path))
                        .forEach(item => {
                            const icon = item.path.endsWith('.html') ? 'üåê' : 
                                       item.path.endsWith('.js') ? '‚öôÔ∏è' : 
                                       item.path.endsWith('.css') ? 'üé®' : 'üìÑ';
                            html += `
                                <div class="file-item" onclick="selectFile('${item.path}')">
                                    <span class="file-info">${icon} ${item.path}</span>
                                    <div class="file-actions">
                                        <button class="icon-btn" onclick="event.stopPropagation(); editFile('${item.path}')">‚úèÔ∏è</button>
                                        <button class="icon-btn" onclick="event.stopPropagation(); deleteFile('${item.path}')">üóëÔ∏è</button>
                                    </div>
                                </div>
                            `;
                        });
                    document.getElementById('fileList').innerHTML = html;
                }
            } catch (e) {
                document.getElementById('fileList').innerHTML = `<div class="file-item">‚ùå –û—à–∏–±–∫–∞: ${e.message}</div>`;
            }
        }

        // –í—ã–±–æ—Ä —Ñ–∞–π–ª–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
        async function selectFile(path) {
            try {
                const res = await fetch(`https://api.github.com/repos/${REPO}/contents/${path}`);
                const data = await res.json();
                
                if (data.content) {
                    const content = atob(data.content);
                    document.getElementById('editFileName').value = path;
                    document.getElementById('editFileContent').value = content;
                    switchTab('editor');
                    showMessage(`üìÑ –ó–∞–≥—Ä—É–∂–µ–Ω: ${path}`);
                }
            } catch (e) {
                showMessage(`–û—à–∏–±–∫–∞: ${e.message}`, 'error');
            }
        }

        // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
        function editFile(path) {
            selectFile(path);
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ (—Å —Ç–æ–∫–µ–Ω–æ–º)
        async function saveFile() {
            const path = document.getElementById('editFileName').value;
            const content = document.getElementById('editFileContent').value;
            
            if (!path || !content) {
                showMessage('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è —Ñ–∞–π–ª–∞ –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ', 'error');
                return;
            }

            showMessage('‚è≥ –°–æ—Ö—Ä–∞–Ω—è—é...');

            try {
                // –ó–∞–ø—É—Å–∫–∞–µ–º workflow —Å —Ç–æ–∫–µ–Ω–æ–º –∏–∑ —Å–µ–∫—Ä–µ—Ç–∞
                const response = await fetch(`https://api.github.com/repos/${REPO}/actions/workflows/ai-proxy.yml/dispatches`, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/vnd.github.v3+json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        ref: 'main',
                        inputs: {
                            action: 'update_file',
                            data: JSON.stringify({
                                path: path,
                                content: content,
                                message: `–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ ${path} —á–µ—Ä–µ–∑ PRO –ø–∞–Ω–µ–ª—å`
                            })
                        }
                    })
                });

                if (response.ok) {
                    showMessage(`‚úÖ Workflow –∑–∞–ø—É—â–µ–Ω! –§–∞–π–ª ${path} —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è...`);
                    setTimeout(loadFiles, 3000);
                } else {
                    showMessage(`‚ùå –û—à–∏–±–∫–∞: ${response.status}`, 'error');
                }
            } catch (e) {
                showMessage(`‚ùå –û—à–∏–±–∫–∞: ${e.message}`, 'error');
            }
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
        async function deleteFile(path) {
            if (!path) path = document.getElementById('editFileName').value;
            if (!path) return;
            
            if (!confirm(`–£–¥–∞–ª–∏—Ç—å ${path}?`)) return;

            try {
                const response = await fetch(`https://api.github.com/repos/${REPO}/actions/workflows/ai-proxy.yml/dispatches`, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/vnd.github.v3+json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        ref: 'main',
                        inputs: {
                            action: 'delete_file',
                            data: JSON.stringify({
                                path: path,
                                message: `–£–¥–∞–ª–µ–Ω–∏–µ ${path}`
                            })
                        }
                    })
                });

                if (response.ok) {
                    showMessage(`‚úÖ Workflow –∑–∞–ø—É—â–µ–Ω! –§–∞–π–ª ${path} —É–¥–∞–ª—è–µ—Ç—Å—è...`);
                    setTimeout(loadFiles, 3000);
                    document.getElementById('editFileName').value = '';
                    document.getElementById('editFileContent').value = '';
                }
            } catch (e) {
                showMessage(`‚ùå –û—à–∏–±–∫–∞: ${e.message}`, 'error');
            }
        }

        // –î–µ–ø–ª–æ–π –Ω–∞ GitHub Pages
        async function deployPages() {
            showMessage('üöÄ –ó–∞–ø—É—Å–∫–∞—é –¥–µ–ø–ª–æ–π...');
            
            const progress = document.getElementById('deployProgress');
            progress.style.display = 'block';
            const bar = progress.querySelector('.progress-bar');
            bar.style.width = '50%';

            try {
                const response = await fetch(`https://api.github.com/repos/${REPO}/actions/workflows/pages-build-deployment/dispatches`, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/vnd.github.v3+json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        ref: 'main'
                    })
                });

                if (response.ok) {
                    bar.style.width = '100%';
                    showMessage('‚úÖ –î–µ–ø–ª–æ–π –∑–∞–ø—É—â–µ–Ω! –ß–µ—Ä–µ–∑ 2 –º–∏–Ω—É—Ç—ã —Å–∞–π—Ç –æ–±–Ω–æ–≤–∏—Ç—Å—è');
                    setTimeout(() => { progress.style.display = 'none'; }, 3000);
                } else {
                    showMessage(`‚ùå –û—à–∏–±–∫–∞: ${response.status}`, 'error');
                    progress.style.display = 'none';
                }
            } catch (e) {
                showMessage(`‚ùå –û—à–∏–±–∫–∞: ${e.message}`, 'error');
                progress.style.display = 'none';
            }
        }

        // –ó–∞–ø—É—Å–∫ workflow
        async function runWorkflow(name) {
            try {
                const response = await fetch(`https://api.github.com/repos/${REPO}/actions/workflows/${name}/dispatches`, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/vnd.github.v3+json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        ref: 'main'
                    })
                });

                if (response.ok) {
                    showMessage(`‚úÖ Workflow ${name} –∑–∞–ø—É—â–µ–Ω!`);
                } else {
                    showMessage(`‚ùå –û—à–∏–±–∫–∞: ${response.status}`, 'error');
                }
            } catch (e) {
                showMessage(`‚ùå –û—à–∏–±–∫–∞: ${e.message}`, 'error');
            }
        }

        // –°–æ–∑–¥–∞—Ç—å index.html
        function createIndexHtml() {
            document.getElementById('editFileName').value = 'index.html';
            document.getElementById('editFileContent').value = `<!DOCTYPE html>
<html>
<head>
    <title>–ú–æ–π —Å–∞–π—Ç</title>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 20px; background: #f0f0f0; }
        h1 { color: #333; }
    </style>
</head>
<body>
    <h1>–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!</h1>
    <p>–°–æ–∑–¥–∞–Ω–æ —á–µ—Ä–µ–∑ PRO –ø–∞–Ω–µ–ª—å</p>
</body>
</html>`;
            switchTab('editor');
        }

        // –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã
        function showNewFile() {
            document.getElementById('editFileName').value = '';
            document.getElementById('editFileContent').value = '';
            switchTab('editor');
        }

        function showCreateRepo() {
            document.getElementById('createRepoForm').style.display = 'block';
        }

        function hideCreateRepo() {
            document.getElementById('createRepoForm').style.display = 'none';
        }

        // –°–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
        async function createRepo() {
            const name = document.getElementById('repoName').value;
            if (!name) return;
            
            showMessage('‚è≥ –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è...');
            
            try {
                const response = await fetch(`https://api.github.com/repos/${REPO}/actions/workflows/ai-proxy.yml/dispatches`, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/vnd.github.v3+json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        ref: 'main',
                        inputs: {
                            action: 'create_repo',
                            data: JSON.stringify({
                                name: name,
                                description: document.getElementById('repoDesc').value
                            })
                        }
                    })
                });

                if (response.ok) {
                    showMessage('‚úÖ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–∑–¥–∞–µ—Ç—Å—è...');
                    hideCreateRepo();
                }
            } catch (e) {
                showMessage(`‚ùå –û—à–∏–±–∫–∞: ${e.message}`, 'error');
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø—É—Å–∫–æ–≤
        async function loadRecentRuns() {
            try {
                const res = await fetch(`https://api.github.com/repos/${REPO}/actions/runs?per_page=5`);
                const data = await res.json();
                
                if (data.workflow_runs) {
                    let html = '';
                    data.workflow_runs.forEach(run => {
                        const status = run.conclusion === 'success' ? '‚úÖ' : '‚è≥';
                        html += `
                            <div class="file-item">
                                <span class="file-info">${status} ${run.name}</span>
                                <span style="color: #8b949e; font-size: 12px;">${new Date(run.created_at).toLocaleTimeString()}</span>
                            </div>
                        `;
                    });
                    document.getElementById('recentRuns').innerHTML = html;
                }
            } catch (e) {
                console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–ø—É—Å–∫–æ–≤');
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.onload = () => {
            loadFiles();
            loadRecentRuns();
            setInterval(loadRecentRuns, 30000);
        };
    </script>
</body>
</html>
