<!DOCTYPE html>
<html>
<head>
    <title>AI GitHub Admin</title>
    <style>
        body { background: #0d1117; color: white; font-family: sans-serif; padding: 20px; }
        .chat { background: #161b22; padding: 20px; border-radius: 10px; max-width: 600px; margin: auto; }
        textarea { width: 100%; margin: 10px 0; padding: 10px; background: #0d1117; color: white; border: 1px solid #30363d; }
        button { background: #238636; color: white; border: none; padding: 10px 20px; cursor: pointer; margin: 5px; }
        .message { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .user { background: #1f6feb; }
        .ai { background: #21262d; }
        .success { color: #2ea043; }
    </style>
</head>
<body>
    <div class="chat">
        <h2>ü§ñ AI GitHub Admin</h2>
        <p class="success">üîí –¢–æ–∫–µ–Ω—ã –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö GitHub (–≤–≤–æ–¥ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è!)</p>
        
        <div id="messages" style="height: 300px; overflow-y: auto; margin-bottom: 10px;"></div>
        
        <textarea id="input" rows="3" placeholder="–ù–∞–ø–∏—à–∏ –∑–∞–¥–∞—á—É..."></textarea>
        
        <button onclick="createFile()">üìÑ –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª</button>
        <button onclick="askAI()">ü§ñ –°–ø—Ä–æ—Å–∏—Ç—å AI</button>
    </div>

    <script>
        const REPO = 'artemis1987/Privet-mir';
        
        function addMessage(text, type) {
            const msg = document.getElementById('messages');
            msg.innerHTML += `<div class="message ${type}">${text}</div>`;
            msg.scrollTop = msg.scrollHeight;
        }

        // –°–û–ó–î–ê–ù–ò–ï –§–ê–ô–õ–ê —á–µ—Ä–µ–∑ workflow (—Ç–æ–∫–µ–Ω—ã –∏–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤!)
        async function createFile() {
            addMessage('‚è≥ –°–æ–∑–¥–∞—é —Ñ–∞–π–ª —á–µ—Ä–µ–∑ workflow...', 'ai');
            
            try {
                // –ó–∞–ø—É—Å–∫–∞–µ–º workflow - —Ç–æ–∫–µ–Ω—ã —Å–∞–º–∏ –ø–æ–¥—Ç—è–Ω—É—Ç—Å—è –∏–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤!
                const response = await fetch(`https://api.github.com/repos/${REPO}/actions/workflows/ai-proxy.yml/dispatches`, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/vnd.github.v3+json'
                        // –¢–æ–∫–µ–Ω –ù–ï –Ω—É–∂–µ–Ω - workflow –ø—É–±–ª–∏—á–Ω—ã–π!
                    },
                    body: JSON.stringify({
                        ref: 'main',
                        inputs: {
                            action: 'create_file',
                            data: JSON.stringify({
                                path: 'test-' + Date.now() + '.txt',
                                content: '–ü—Ä–∏–≤–µ—Ç –æ—Ç AI! –°–æ–∑–¥–∞–Ω–æ ' + new Date(),
                                message: 'AI —Å–æ–∑–¥–∞–ª —Ñ–∞–π–ª'
                            })
                        }
                    })
                });

                if (response.ok) {
                    addMessage('‚úÖ Workflow –∑–∞–ø—É—â–µ–Ω! –§–∞–π–ª –ø–æ—è–≤–∏—Ç—Å—è —á–µ—Ä–µ–∑ –º–∏–Ω—É—Ç—É', 'ai');
                } else {
                    addMessage(`‚ùå –û—à–∏–±–∫–∞: ${response.status}`, 'error');
                }
            } catch (e) {
                addMessage(`‚ùå –û—à–∏–±–∫–∞: ${e.message}`, 'error');
            }
        }

        // –°–ü–†–û–°–ò–¢–¨ AI —á–µ—Ä–µ–∑ workflow (—Ç–æ–∫–µ–Ω OpenRouter –∏–∑ —Å–µ–∫—Ä–µ—Ç–∞!)
        async function askAI() {
            const text = document.getElementById('input').value;
            if (!text) {
                alert('–ù–∞–ø–∏—à–∏ –≤–æ–ø—Ä–æ—Å');
                return;
            }

            addMessage(text, 'user');
            document.getElementById('input').value = '';
            addMessage('‚è≥ –°–ø—Ä–∞—à–∏–≤–∞—é AI...', 'ai');

            try {
                // –ó–∞–ø—É—Å–∫–∞–µ–º workflow —Å –≤–æ–ø—Ä–æ—Å–æ–º –∫ AI
                const response = await fetch(`https://api.github.com/repos/${REPO}/actions/workflows/ai-proxy.yml/dispatches`, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/vnd.github.v3+json'
                    },
                    body: JSON.stringify({
                        ref: 'main',
                        inputs: {
                            action: 'chat',
                            data: JSON.stringify({
                                messages: [{ role: 'user', content: text }]
                            })
                        }
                    })
                });

                if (response.ok) {
                    addMessage('‚úÖ –ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –û—Ç–≤–µ—Ç –ø–æ—è–≤–∏—Ç—Å—è –≤ –ª–æ–≥–∞—Ö workflow —á–µ—Ä–µ–∑ –º–∏–Ω—É—Ç—É', 'ai');
                    addMessage('üëâ –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Actions —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –æ—Ç–≤–µ—Ç', 'ai');
                } else {
                    addMessage(`‚ùå –û—à–∏–±–∫–∞: ${response.status}`, 'error');
                }
            } catch (e) {
                addMessage(`‚ùå –û—à–∏–±–∫–∞: ${e.message}`, 'error');
            }
        }

        addMessage('üëã –í—Å—ë –≥–æ—Ç–æ–≤–æ! –¢–æ–∫–µ–Ω—ã –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö:', 'ai');
        addMessage('‚úÖ GitHub —Ç–æ–∫–µ–Ω - –≤ —Å–µ–∫—Ä–µ—Ç–µ', 'ai');
        addMessage('‚úÖ OpenRouter —Ç–æ–∫–µ–Ω - –≤ —Å–µ–∫—Ä–µ—Ç–µ', 'ai');
        addMessage('üëâ –ù–∞–∂–º–∏ "–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª"', 'ai');
    </script>
</body>
</html>
